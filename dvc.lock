schema: '2.0'
stages:
  train:
    cmd: pipenv run python sherlock/scripts/train.py
    deps:
    - path: Pipfile.lock
      md5: 424fdb295f5099b7e1c300f9c75997bb
      size: 156492
    - path: data/data/processed/test.parquet
      md5: f8fa134f0cd0e03d27dc2290f6a9f7f3
      size: 550776866
    - path: data/data/processed/train.parquet
      md5: d61a806ce3446933442b9db1e3dbe347
      size: 1574760296
    - path: data/data/processed/validation.parquet
      md5: 6ecdb1851a3f98944ce84c1717bb409f
      size: 551882138
    - path: data/data/raw/test_labels.parquet
      md5: 3c49eed09d82258bd4ace366b9139722
      size: 1075735
    - path: data/data/raw/train_labels.parquet
      md5: 91e0b05d41f63d72a8fa2f17b71e2ca0
      size: 2665143
    - path: data/data/raw/val_labels.parquet
      md5: d974f809f1f6d1bfe884497cf9644b2f
      size: 1075411
    - path: sherlock
      md5: 7eecf5a4e1398b692c88255955aa0abc.dir
      size: 2254669253
      nfiles: 33
    params:
      params.yaml:
        dropout_rate: 0.35
        early_stop:
          patience: 5
          monitor: val_loss
        epochs: 100
        learning_rate: 0.0001
        loss: categorical_crossentropy
        metrics:
        - categorical_accuracy
        penalty: 0.0001
        submodels:
        - char
        - word
        - par
        - rest
        validation_steps: 5
    outs:
    - path: dvclive/metrics.json
      md5: b4071c43f365605a9958850bd8e9820b
      size: 235
    - path: dvclive/plots
      md5: f987c20dd54b316fedd349d0757c64e3.dir
      size: 1897
      nfiles: 4
    - path: model_files/
      md5: 4de9c361eb2a8ab928ea201886f72751.dir
      size: 6237660
      nfiles: 2
  preprocess:
    cmd: pipenv run python sherlock/scripts/preprocess.py
    deps:
    - path: data/data/raw/test_values.parquet
      md5: 3bec4370ec05849aac49b5b32843ba9e
      size: 92889349
    - path: data/data/raw/train_values.parquet
      md5: d3a60fb6905a95c59516e2d581e7c1fa
      size: 264769689
    - path: data/data/raw/val_values.parquet
      md5: 10385153a11ebc350d5417ea066d6792
      size: 95492484
    - path: sherlock/features/par_vec_trained_400.pkl
      md5: 02c1889619e759fad92732cdc147ff7a
      size: 26531740
    - path: sherlock/features/par_vec_trained_400.pkl.docvecs.vectors_docs.npy
      md5: 643dbd19be6639a29887e1a0a783f8a8
      size: 659294528
    - path: sherlock/features/par_vec_trained_400.pkl.trainables.syn1neg.npy
      md5: 12478c3ea87a9ec00428a8286b94dfc3
      size: 595870528
    - path: sherlock/features/par_vec_trained_400.pkl.wv.vectors.npy
      md5: 8ceefa7b5c2c9a1c7b9a116fbefd9bdc
      size: 595870528
    outs:
    - path: data/data/processed/test.parquet
      md5: 41627902ab0ac3946142d7261fa08c01
      size: 550777504
    - path: data/data/processed/train.parquet
      md5: 51f78d0176ae351d9df606daecabb3fb
      size: 1574769596
    - path: data/data/processed/validation.parquet
      md5: 831ba9e5cc06736366aceb5a8cc2a918
      size: 551860282
